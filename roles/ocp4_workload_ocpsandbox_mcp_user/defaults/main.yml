---
# ------------------------------------------------
# MCP user provisioner for OCP Sandbox model
# Deploys MCP servers, LibreChat, and Agent for a single user
# ------------------------------------------------

# Cluster connection (from sandbox)
ocp4_workload_ocpsandbox_mcp_user_openshift_api_url: "{{ sandbox_openshift_api_url }}"
ocp4_workload_ocpsandbox_mcp_user_openshift_api_token: "{{ cluster_admin_agnosticd_sa_token | trim }}"

# Single user to provision (e.g., "user-gtpw4")
ocp4_workload_ocpsandbox_mcp_user_username: ""

# ArgoCD project for all ApplicationSets
ocp4_workload_ocpsandbox_mcp_user_argocd_project: "appproject-{{ ocp4_workload_ocpsandbox_mcp_user_username }}"

# LiteMaaS credentials
ocp4_workload_ocpsandbox_mcp_user_litemaas_key: ""
ocp4_workload_ocpsandbox_mcp_user_litemaas_url: https://litellm.apps.maas.redhatworkshops.io/v1
ocp4_workload_ocpsandbox_mcp_user_litemaas_models: ["llama-scout-17b"]

# -------------------------------------------------------------------
# GitOps repo (user's Gitea fork of mcp-gitops)
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_gitops_repo_tag: main

# -------------------------------------------------------------------
# OpenShift MCP Server
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_openshift_repo_path: tenant/mcp-openshift
ocp4_workload_ocpsandbox_mcp_user_openshift_namespace_base: mcp-openshift
ocp4_workload_ocpsandbox_mcp_user_openshift_image: quay.io/containers/kubernetes_mcp_server:latest

# -------------------------------------------------------------------
# Per-user Gitea instance (deployed via Gitea operator)
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_gitea_namespace: "gitea-{{ ocp4_workload_ocpsandbox_mcp_user_username }}"
ocp4_workload_ocpsandbox_mcp_user_gitea_instance_image: quay.io/rhpds/gitea
ocp4_workload_ocpsandbox_mcp_user_gitea_instance_image_tag: "1.25.4"
ocp4_workload_ocpsandbox_mcp_user_gitea_volume_size: 2Gi
ocp4_workload_ocpsandbox_mcp_user_gitea_postgresql_image: registry.redhat.io/rhel10/postgresql-16
ocp4_workload_ocpsandbox_mcp_user_gitea_postgresql_image_tag: latest
ocp4_workload_ocpsandbox_mcp_user_gitea_postgresql_volume_size: 2Gi
ocp4_workload_ocpsandbox_mcp_user_gitea_admin_user: gitea-admin
ocp4_workload_ocpsandbox_mcp_user_gitea_admin_password: "{{ ocp4_workload_ocpsandbox_mcp_user_gitea_user_password }}"
ocp4_workload_ocpsandbox_mcp_user_gitea_user_password: ""
ocp4_workload_ocpsandbox_mcp_user_gitea_repositories:
- name: mcp
  repo: https://github.com/rhpds/ocpsandbox-mcp-with-openshift-gitops
  private: false

# -------------------------------------------------------------------
# Gitea MCP Server
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_gitea_repo_path: tenant/mcp-gitea
ocp4_workload_ocpsandbox_mcp_user_gitea_namespace_base: mcp-gitea
ocp4_workload_ocpsandbox_mcp_user_gitea_image: docker.gitea.com/gitea-mcp-server:latest
ocp4_workload_ocpsandbox_mcp_user_gitea_internal_url: "http://gitea.{{ ocp4_workload_ocpsandbox_mcp_user_gitea_namespace }}.svc.cluster.local:3000"
ocp4_workload_ocpsandbox_mcp_user_gitea_repository: mcp

# -------------------------------------------------------------------
# LibreChat
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_librechat_namespace_base: librechat
ocp4_workload_ocpsandbox_mcp_user_librechat_repo: https://github.com/danny-avila/LibreChat
ocp4_workload_ocpsandbox_mcp_user_librechat_repo_tag: v0.8.1
ocp4_workload_ocpsandbox_mcp_user_librechat_repo_path: ./helm/librechat
ocp4_workload_ocpsandbox_mcp_user_librechat_config_repo_path: ./tenant/librechat
ocp4_workload_ocpsandbox_mcp_user_librechat_email_domain: "example.com"
ocp4_workload_ocpsandbox_mcp_user_librechat_password: ""

# -------------------------------------------------------------------
# Agent
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_agent_repo_path: tenant/agent
ocp4_workload_ocpsandbox_mcp_user_agent_namespace_base: agent
ocp4_workload_ocpsandbox_mcp_user_agent_model_name: "openai/llama-scout-17b"

# -------------------------------------------------------------------
# Metrics access
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_metrics_enable: false

# -------------------------------------------------------------------
# Cloud Native PostgreSQL operator
# -------------------------------------------------------------------
ocp4_workload_ocpsandbox_mcp_user_cloud_native_postgresql_operator_enable: false
ocp4_workload_ocpsandbox_mcp_user_cloud_native_postgresql_operator_namespace: cloudnative-pg
ocp4_workload_ocpsandbox_mcp_user_cloud_native_postgresql_operator_channel: stable-v1
